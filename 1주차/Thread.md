## 1) 프로세스

**프로그램이 실행되어 OS로부터 메모리를 할당받은 `독립된 실행 단위`**

- 인텔리제이에서 `java Main` 실행 → OS는 `JVM을 하나의 프로세스`로 실행
- 이 JVM 프로세스 안에 힙, 스택, 메서드 영역 같은 메모리 공간이 만들어짐

### 특징
- 독립된 메모리 공간을 가짐
- 프로세스끼리는 메모리를 공유하지 않음(IPC 필요)
- 무겁고 생성 비용이 큼

⇒  **자바 프로그램 하나 실행 = JVM 프로세스 1개 생성**

<br><br>

## 2) 스레드

프로세스 내부에서 실행되는 흐름(실행 단위) ⇒ **프로세스 안에서 일꾼들이 여러 명 있는 것**

- 일단 자바프로그램 실행하면 메인 쓰레드 하나 생긴다.

### **특징**

- 같은 프로세스 안의 다른 스레드들과 `힙 메모리(객체)를 공유`함
- 각 스레드는 자신만의 **`스택(Stack)`** 을 가짐
- 프로세스보다 가볍고 생성 비용이 적음
- 동시에 여러 작업을 실행할 수 있게 함

| **메서드** | **의미** |
| --- | --- |
| start() | OS에 “새 스레드 하나 만들어줘” 요청 → 새 스레드가 생성되고 → 내부에서 run()을 호출함 |
| run() | 그냥 메서드 실행. **스레드 생성 없음. main과 동일 스레드에서 실행됨** |

### 자바에서 하나의 프로세스에 여러 쓰레드가 사용되는 이유

```bash
- 클라이언트 A → 요청
- 클라이언트 B → 요청
- 클라이언트 C → 요청
```

- 하나의 스레드만 있다면?
    → A 처리 끝날 때까지 B, C는 계속 기다려야 해서 결국 **서버 전체가 느려지고, 서비스 불가능**
    
- 여러 스레드를 쓰면?
    
    → **각 요청마다 스레드를 분배**해서 병렬처럼 처리해서 서버가 멈추지 않고 계속 빠르게 대응 가능

<br>

### Q&A
```
🧑‍🏫 멘토: 
옛날에는 프로세스로도 프로그램이 돌아갔는데 지금은 쓰레드도 같이 포함해서 돌아가는데 그 이유가 뭔가?

🙋‍♂️ 나:
메모리를 적게먹고, CPU 1코어당 1프로세스 처리하던 구조를 벙렬로 처리하게 되지 않나요?

🧑‍🏫 멘토: 
메모리 부분은 잘 모르겠다, 근데 병렬이 뭔가요?

🙋‍♂️ 나:
내가 뭘 하고있는데 한 개를 꺼버리면 진행중이던 것들도 다 종료가 되니 병렬로 해야 돌리던걸 유지할 수 있겠다는 생각으로 말씀드렸습니다.

🧑‍🏫 멘토: 
컴퓨터말고 말 뜻은 뭘까요?

🙋‍♂️ 나:
직렬의 반대로 1/2로 분산해주는 것 아닌가요?

🧑‍🏫 멘토: 
병렬성과 동시성의 차이는 뭔가요?
이게 말 장난 같아도 두개의 차이는 극명하고, 잘못말하면 패러다임 자체가 바뀌므로 잘 말해야한다.
병렬은 물리적으로 2개가 따로 동작하는걸 병렬이라고 한다. 예를들면 컴퓨터 노래를 들으면서 인터넷 하는 것 처럼요
CPU는 코어가 여러개인데 이건 분리를 해서 일하는걸까요?

🙋‍♂️ 나:
카페알바 할 때 재료를 공유해서 일하는 것과 같아보입니다.

🧑‍🏫 멘토:
Context Switching을 말씀드린 것이었다.

🧑‍🏫 멘토:
RR(Round Robin)는 여러 프로세스가 CPU를 일정 시간(Time Slice)씩 번갈아 가며 사용하는 방식으로, 이는 동시성(Concurrency)의 대표적인 예이다.
동시성은 CPU가 여러 작업을 아주 빠르게 교체하며 실행하기 때문에 동시에 처리되는 것처럼 보이는 것이다.

🧑‍🏫 멘토:
CPU에는 4코어, 8코어, 16코어와 같이 여러 개의 코어가 존재하는데,
16코어 CPU는 최대 16개의 작업을 실제로 동시에 실행할 수 있다.
예를 들어, 한 코어에서 인터넷을 실행하고 다른 코어에서 음악을 재생한다면,
이 경우는 서로 다른 CPU 코어에서 동시에 실행되므로 병렬성(Parallelism)에 해당한다.

🧑‍🏫 멘토:
이처럼 병렬성에서는 작업이 동시에 실행되기 때문에
하나의 코어를 여러 작업이 번갈아 사용하는 Context Switching이나 RR 방식은 발생하지 않는다.

🧑‍🏫 멘토:
그럼 쓰레드와 메모리의 차이가 메모리라고 하셨나요? 쓰레드가 공유하는 그 메모리는 어디에 할당될까요?

🙋‍♂️ 나:
프로세스 위 입니다.

🧑‍🏫 멘토:
맞아요 프로세스가 할당받은 메모리 공간을 쓰레드가 나눠서 쓰는건데, 그 영역을 크리티컬 섹션이라고 합니다.
크리티컬 섹션이 뭐죠? 

🙋‍♂️ 나:
동시에 접근하는 영역인가요?

🧑‍🏫 멘토:
맞아요 동시에 접근하면 싱크로 오류가 발생합니다. 그걸 어떻게 해결할 수 있을까요?

🙋‍♂️ 나:
싱크로 나이즈를 써서 먼저 선점한 사람이 락을 얻어서 먼저 일을 처리하고, 그 다음 차례인 친구가 들어와서 락을 선점하여 일을 처리하는 방식으로 합니다.

🧑‍🏫 멘토:
싱크로 나이즈드 말고는요?

🙋‍♂️ 나:
모르겠습니다.

🧑‍🏫 멘토:
이런 동시성을 해결하기 위해 자바에서 AtomicInteger, synchronized map, concurrent hash map등의 자료구조를 많이 만들어놨다.
그리고 볼라이트와 같은 키워드 등에 대해서 공부를 해줘야한다.
```

  
